<!doctype html>

<html lang="en">
<head>
	<meta charset="utf-8">
	<link rel="stylesheet" href="style.css" />
	<title>FetishQuest</title>
	<meta name="description" content="A lewd dungeon game!">
	<meta name="author" content="JasX">
</head>

<body>
	<script src="https://cdnjs.cloudflare.com/ajax/libs/tween.js/17.2.0/Tween.min.js"></script>
	<script src="https://ajax.googleapis.com/ajax/libs/jquery/3.3.1/jquery.min.js"></script>
	<script src="https://cdnjs.cloudflare.com/ajax/libs/dexie/2.0.4/dexie.min.js"></script>
	<script src="https://cdnjs.cloudflare.com/ajax/libs/mathjs/5.1.1/math.min.js"></script>
	<script src="https://cdn.jsdelivr.net/npm/deep-diff@1/dist/deep-diff.min.js"></script>
	<script src="/socket.io/socket.io.js"></script>
	<script src="globalFunctions.js"></script>
	<script>
		console.log("Entry point for debugging is 'game'");
		// Globals
		var game = true, glib, g_Condition, g_GameEvent, g_Audio, g_Mod;
	</script>
	<script type="module">
		import Game from './classes/Game.js';
		import Player from './classes/Player.js';
		import Condition from './classes/Condition.js';
		import GameEvent from './classes/GameEvent.js';
		import Audio from './classes/Audio.js';
		import Mod from './classes/Mod.js';
		import GameLib from './classes/GameLib.js';

		console.log("Modules imported, starting game");
		
		g_Condition = Condition;
		g_GameEvent = GameEvent;
		g_Audio = Audio;
		g_Mod = Mod;
		glib = new GameLib();
		window.Player = Player;

		glib.ini()
		.then(() => {
			Game.load();
		})
		.then(() => {
			console.log("Game initialized. Globals:\ngame = Active game\nglib = Game asset library\ng_Condition = Condition class\ng_Mod = Mod class\ng_GameEvent = GameEvent class\ng_Audio = Audio class");
		})
		.catch(err => console.error(err));
		
	</script>
	<div id="bg"></div>

	<div id="content">
		<div id="renderer"></div>
		<div id="ui">
			<div class="middle">
				<div class="text">
					<div class="content"></div>
				</div>
				<div class="chat" contenteditable></div>
			</div>
			<div class="players">
				<div class="left"></div>
				<div class="right"></div>
			</div>

			<div class="actionbar"></div>
			
			<div id="dm_tools"></div>
		</div>
		<div id="fx"></div>
		<div id="gameIcons"></div>
	</div>

	<div id="netgamePlayers"></div>
	

	<div id="modal" class="hidden">
		<div class="wrapper">
			<div class="content"></div>
			<input type="button" value="Close" />
		</div>
	</div>

	<div id="selectionbox" class="selectionbox hidden"></div>

	<div id="notices"></div>
	
</body>
</html>